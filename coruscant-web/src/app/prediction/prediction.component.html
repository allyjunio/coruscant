<div class="container">

  <div class="loading-shade" *ngIf="isLoadingResults">
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
  </div>

  <div class="mat-form-field">
    <form [formGroup]="form" class="form" (ngSubmit)="onFormSubmit()">
      <mat-form-field class="full-width">
        <mat-label>Type text to analyse</mat-label>
        <textarea formControlName="textSearch" #textSearch maxlength="500" matInput
                  placeholder="Type the text to analyze"></textarea>
        <mat-hint align="end">{{textSearch.value.length}} / 500</mat-hint>
      </mat-form-field>
      <mat-error>
        <span
          *ngIf="!form.get('textSearch').valid && form.get('textSearch').touched">Please type the text to analyze</span>
      </mat-error>
      <div class="button-row">
        <button type="submit" mat-raised-button color="primary" [disabled]="!form.valid">
          Analyze
          <mat-icon>filter_list</mat-icon>
        </button>
      </div>
    </form>
    <div class="button-row">
      <button mat-raised-button color="warn" (click)="clearResults()">
        Clear
        <mat-icon>clear</mat-icon>
      </button>
    </div>
  </div>

  <div class="mat-body" *ngIf="showResults">
    <div class="circle-progress" *ngIf="model.severe_toxic >= 0">
      <circle-progress
        [percent]="model.severe_toxic"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#380071'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Aggression'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>

    <div class="circle-progress" *ngIf="model.toxic >= 0">
      <circle-progress
        [percent]="model.toxic"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#830081'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Toxic'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>

    <div class="circle-progress" *ngIf="model.identity_hate >= 0">
      <circle-progress
        [percent]="model.identity_hate"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#830044'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Identity Hate'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>

    <div class="circle-progress" *ngIf="model.obscene >= 0">
      <circle-progress
        [percent]="model.obscene"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#CA5900'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Obscene'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>

    <div class="circle-progress" *ngIf="model.threat >= 0">
      <circle-progress
        [percent]="model.threat"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#B6005A'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Threat'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>

    <div class="circle-progress" *ngIf="model.insult >= 0">
      <circle-progress
        [percent]="model.insult"
        [radius]="100"
        [outerStrokeWidth]="30"
        [innerStrokeWidth]="5"
        [outerStrokeColor]="'#FFBF00'"
        [innerStrokeColor]="'#3F51B5'"
        [unitsFontSize]="15"
        [titleFontSize]="25"
        [subtitleFontSize]="25"
        [subtitle]="'Insult'"
        [animation]="true"
        [animationDuration]="300"
        [responsive]="true"
        [unitsColor]="'#FF0000'"
        [titleColor]="'#FF0000'"
        [subtitleColor]="'#FF0000'"
        [titleFontWeight]="'bold'"
      ></circle-progress>
    </div>
  </div>
</div>


